<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vasi & Patologia — Biologia 3D</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;800&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="style.css?v=27" />

    <style>
        :root {
            --bg-deep: #050505;
            --glass-panel: rgba(28, 28, 32, 0.82);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.5);
            --accent-red: #ff3b30;
            --accent-yellow: #ffcc00;
            --font: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
        }

        body {
            background-color: var(--bg-deep);
            background-image: radial-gradient(circle at 50% 50%, #1a1a20, #000 80%);
            margin: 0;
            font-family: var(--font);
            color: var(--text-primary);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }

        .app {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header.header {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid var(--glass-border);
            z-index: 1000;
            position: sticky;
            top: 0;
        }

        .main-content {
            padding: 60px 20px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            gap: 40px;
            align-items: center;
        }

        .hero-section {
            text-align: center;
            max-width: 800px;
        }

        .hero-section h2 {
            font-size: 48px;
            font-weight: 800;
            margin: 0;
            letter-spacing: -0.04em;
            background: linear-gradient(to bottom, #fff, #aaa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-section p {
            color: var(--text-secondary);
            font-size: 18px;
            margin-top: 15px;
            line-height: 1.6;
        }

        /* ─── Simulation Stage ─── */
        .stage-container {
            width: 100%;
            background: var(--glass-panel);
            border: 1px solid var(--glass-border);
            border-radius: 40px;
            padding: 60px;
            box-shadow: 0 40px 100px rgba(0, 0, 0, 0.6);
            display: flex;
            flex-direction: column;
            gap: 40px;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .artery-canvas {
            width: 100%;
            height: 300px;
            position: relative;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* Artery Structure */
        .artery {
            width: 110%;
            height: 120px;
            background: #4a0404;
            border-top: 6px solid #630606;
            border-bottom: 6px solid #630606;
            position: relative;
            display: flex;
            align-items: center;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Inner wall shine */
        .artery::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.05), transparent 30%, transparent 70%, rgba(255, 255, 255, 0.05));
            pointer-events: none;
        }

        /* Plasma flow */
        .blood-stream {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .rbc-particle {
            position: absolute;
            width: 14px;
            height: 14px;
            background: #ff3b30;
            border-radius: 50%;
            opacity: 0.8;
            box-shadow: inset -2px -2px 4px rgba(0, 0, 0, 0.5);
            animation: flow linear infinite;
        }

        @keyframes flow {
            from {
                transform: translateX(-50px);
            }

            to {
                transform: translateX(1100px);
            }
        }

        /* Plaque / Atherosclerosis */
        .plaque {
            position: absolute;
            background: #ffcc00;
            border-radius: 40% 60% 70% 30% / 50%;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3), 0 0 10px rgba(255, 204, 0, 0.3);
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.8s ease;
        }

        .plaque.p-top {
            top: 0;
            width: 140px;
            height: 40px;
            margin-top: -10px;
        }

        .plaque.p-bottom {
            bottom: 0;
            width: 180px;
            height: 50px;
            margin-bottom: -15px;
        }

        /* Clot / Thrombus */
        .thrombus {
            position: absolute;
            width: 60px;
            height: 80px;
            background: #2a0202;
            border-radius: 40%;
            left: 50%;
            transform: translateX(-50%) scale(0);
            box-shadow: 0 0 30px #000;
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 20;
        }

        /* States */
        [data-state="aterosclerosi"] .plaque {
            opacity: 1;
            transform: scale(1.1);
        }

        [data-state="aterosclerosi"] .artery {
            transform: scaleY(0.9);
        }

        [data-state="trombosi"] .plaque {
            opacity: 1;
            transform: scale(1.2);
        }

        [data-state="trombosi"] .thrombus {
            opacity: 1;
            transform: translateX(-50%) scale(1.3);
        }

        [data-state="trombosi"] .rbc-particle {
            animation-play-state: paused;
            opacity: 0.4;
        }

        /* Navigation Pills */
        .sim-nav {
            display: flex;
            gap: 12px;
            background: rgba(255, 255, 255, 0.05);
            padding: 8px;
            border-radius: 40px;
            border: 1px solid var(--glass-border);
        }

        .sim-btn {
            padding: 12px 24px;
            border-radius: 30px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .sim-btn.active {
            background: #fff;
            color: #000;
            box-shadow: 0 10px 20px rgba(255, 255, 255, 0.1);
        }

        /* Description Cards */
        .desc-container {
            width: 100%;
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            animation: fadeIn 0.5s ease;
        }

        .desc-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--glass-border);
            padding: 30px;
            border-radius: 24px;
            display: none;
            flex-direction: column;
            gap: 12px;
        }

        .desc-card.active {
            display: flex;
        }

        .desc-card h3 {
            margin: 0;
            font-size: 24px;
            font-weight: 700;
            color: #fff;
        }

        .desc-card p {
            margin: 0;
            color: var(--text-secondary);
            line-height: 1.7;
            font-size: 16px;
        }

        .warning-tag {
            align-self: flex-start;
            background: rgba(255, 59, 48, 0.1);
            color: #ff3b30;
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>
    <div class="app">
        <header class="header">
            <h1>Biologia 3D</h1>
            <span class="header-sep">·</span>
            <p>Laboratorio Integrato</p>
            <div class="mode-switch">
                <a href="index.html" class="mode-btn">3D Viewer</a>
                <a href="centrifuga.html" class="mode-btn">Centrifuga</a>
                <a href="ematologia.html" class="mode-btn">Ematologia</a>
                <span class="mode-btn active">Vasi & Patologia</span>
            </div>
        </header>

        <main class="main-content">
            <section class="hero-section">
                <h2>Patologia Cardiovascolare</h2>
                <p>Esplora come lo stile di vita e i fattori genetici influenzano le pareti arteriose, portando a
                    condizioni critiche come l'infarto del miocardio.</p>
            </section>

            <div class="stage-container" id="sim-stage" data-state="normale">
                <div class="sim-nav">
                    <button class="sim-btn active" onclick="setState('normale')">Arteria Normale</button>
                    <button class="sim-btn" onclick="setState('aterosclerosi')">Aterosclerosi</button>
                    <button class="sim-btn" onclick="setState('trombosi')">Infarto (Trombosi)</button>
                </div>

                <div class="artery-canvas">
                    <div class="artery">
                        <div class="blood-stream" id="blood-stream"></div>
                        <div class="plaque p-top" style="left: 40%"></div>
                        <div class="plaque p-bottom" style="left: 45%"></div>
                        <div class="plaque p-top" style="left: 70%; width: 100px; height: 30px;"></div>
                        <div class="thrombus"></div>
                    </div>
                </div>

                <div class="desc-container">
                    <div class="desc-card active" id="desc-normale">
                        <h3>Arteria Sana</h3>
                        <p>Le pareti sono elastiche e la superficie interna (endotelio) è liscia. Il sangue scorre
                            liberamente, garantendo l'apporto di ossigeno e nutrienti a tutti i tessuti.</p>
                    </div>

                    <div class="desc-card" id="desc-aterosclerosi">
                        <h3>Formazione di Placche</h3>
                        <p>L'accumulo di colesterolo, grassi e detriti cellulari crea placche aterosclerotiche. Il lume
                            del vaso si restringe, aumentando la pressione e riducendo il flusso ematico.</p>
                        <div class="warning-tag">Rischio Ipertensione</div>
                    </div>

                    <div class="desc-card" id="desc-trombosi">
                        <h3>Trombosi Coronarica</h3>
                        <p>La rottura di una placca può innescare la formazione di un trombo (coagulo). Se questo
                            avviene nelle coronarie, il blocco totale del flusso impedisce al muscolo cardiaco di
                            ricevere ossigeno, causando l'<strong>infarto miocardico</strong>.</p>
                        <div class="warning-tag" style="background: rgba(255, 59, 48, 0.2);">Emergenza Medica</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Init Blood Stream
        const stream = document.getElementById('blood-stream');
        function createRBC() {
            const rbc = document.createElement('div');
            rbc.className = 'rbc-particle';
            rbc.style.top = Math.random() * 80 + 10 + '%';
            rbc.style.left = '-20px';
            rbc.style.animationDuration = (Math.random() * 2 + 2) + 's';
            rbc.style.animationDelay = (Math.random() * 3) + 's';
            stream.appendChild(rbc);

            rbc.addEventListener('animationiteration', () => {
                rbc.style.top = Math.random() * 80 + 10 + '%';
            });
        }

        for (let i = 0; i < 30; i++) createRBC();

        function setState(state) {
            const stage = document.getElementById('sim-stage');
            stage.setAttribute('data-state', state);

            // Buttons
            document.querySelectorAll('.sim-btn').forEach(btn => {
                btn.classList.toggle('active', btn.innerText.toLowerCase().includes(state.substring(0, 4)));
            });

            // Descriptions
            document.querySelectorAll('.desc-card').forEach(card => {
                card.classList.toggle('active', card.id === 'desc-' + state);
            });

            // Adjust flow speed
            const particles = document.querySelectorAll('.rbc-particle');
            particles.forEach(p => {
                if (state === 'normale') p.style.animationDuration = '3s';
                else if (state === 'aterosclerosi') p.style.animationDuration = '1.5s'; // Faster due to pressure
                else p.style.animationDuration = '10s'; // Stalled
            });
        }
    </script>
</body>

</html>